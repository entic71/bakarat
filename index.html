<!doctype html><html lang="ko"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>강남랜드 </title><style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');:root{--bg:#071e3a;--panel:#0b2740;--accent:#0ea5ff;--accent-2:#00b4ff;--muted:#9fb6d9;--glass:rgba(255,255,255,0.03)}*{box-sizing:border-box}html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,'Noto Sans KR',sans-serif;background:linear-gradient(180deg,#061427 0%,#04233b 100%);color:#e6f0ff}.container{max-width:1100px;margin:28px auto;padding:20px;display:grid;grid-template-columns:320px 1fr;gap:20px}.panel{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.04);box-shadow:0 8px 28px rgba(2,6,23,0.6)}.brand{display:flex;align-items:center;gap:12px}.brand .logo{font-weight:800;font-size:20px;color:var(--accent)}.brand .tag{color:var(--muted);font-size:12px}label{display:block;margin-top:10px;color:var(--muted);font-size:13px}input[type=text],input[type=password],input[type=number]{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;margin-top:6px}.btn{display:inline-block;padding:10px 12px;border-radius:10px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#002236;font-weight:700;border:none;cursor:pointer}.btn.alt{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--accent)}.muted{color:var(--muted);font-size:13px}table{width:100%;border-collapse:collapse;margin-top:10px}th,td{padding:6px;text-align:left;font-size:13px}thead th{color:var(--muted);font-weight:600}.game{background:linear-gradient(180deg,rgba(255,255,255,0.015),rgba(255,255,255,0.01));border-radius:12px;padding:20px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 8px 28px rgba(2,6,23,0.6)}.toprow{display:flex;align-items:center;gap:12px}.credits{font-size:18px;font-weight:800;color:var(--accent)}.stage{margin-left:auto;color:var(--muted)}.coin-wrap{display:flex;flex-direction:column;align-items:center;margin:18px 0}.coin{width:140px;height:140px;border-radius:50%;position:relative;transform-style:preserve-3d;cursor:pointer}.coin-face{position:absolute;inset:0;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:20px;backface-visibility:hidden;border:6px solid rgba(255,255,255,0.04)}.coin-front{background:radial-gradient(circle at 30% 25%,#bff1ff,#60c0ff);box-shadow:0 10px 30px rgba(6,139,206,0.12)}.coin-back{background:radial-gradient(circle at 70% 75%,#8fd1ff,#0ea5ff);transform:rotateY(180deg);box-shadow:0 10px 30px rgba(6,139,206,0.08)}.coin.spin{animation:spin 1.2s cubic-bezier(.2,.8,.2,1)}.coin.heads{transform:rotateY(0deg)}.coin.tails{transform:rotateY(180deg)}@keyframes spin{from{transform:rotateY(0)}to{transform:rotateY(1440deg)}}.glow{width:220px;height:220px;border-radius:50%;filter:blur(30px);opacity:0.9;position:absolute;z-index:-1}.glow.win{background:radial-gradient(circle,#8ef3ff, transparent 45%)}.glow.lose{background:radial-gradient(circle,#7fb8ff, transparent 45%)}.controls{display:flex;gap:10px;margin-top:12px}.controls .wide{flex:1}#log{margin-top:12px;padding:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:10px;min-height:120px;overflow:auto}.log-item{font-size:13px;color:var(--muted);margin-bottom:6px}.modal-back{position:fixed;inset:0;background:rgba(2,6,23,0.6);display:none;align-items:center;justify-content:center}.modal{background:var(--panel);padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);min-width:320px}@media(max-width:920px){.container{grid-template-columns:1fr;padding:12px}.coin{width:110px;height:110px}}</style></head><body><div class="container"><div class="panel"><div class="brand"><div class="logo">강남랜드</div><div class="tag">토토 스타일 베팅</div></div><label>학번 (ID)</label><input id="inId" type="text" placeholder="예: 20824"/><label>비밀번호</label><input id="inPwd" type="password" placeholder="비밀번호"/><div style="display:flex;gap:8px;margin-top:10px"><button id="btnLogin" class="btn">로그인</button><button id="btnSignup" class="btn alt">회원가입</button></div><div style="margin-top:14px" class="muted">기본 100크레딧으로 시작. 학번 중복 가입 불가.</div><hr style="border:none;height:1px;background:rgba(255,255,255,0.03);margin:14px 0"/><h3 style="margin:0 0 8px 0">랭킹 미리보기</h3><table id="rankPreview"><thead><tr><th>순위</th><th>학번</th><th>크레딧</th></tr></thead><tbody></tbody></table></div><div class="game"><div class="toprow"><div class="credits">크레딧: <span id="credits">0</span></div><div class="stage">현재 단계: <strong id="stageLabel">-</strong></div></div><div style="margin-top:12px;display:flex;gap:10px;align-items:center"><label style="color:var(--muted);">배팅 금액</label><input id="bet" type="number" value="10" min="1" style="width:140px;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit"/></div><div style="position:relative;display:flex;flex-direction:column;align-items:center"><div id="glow" class="glow" style="display:none"></div><div class="coin-wrap"><div id="coin" class="coin heads" aria-hidden="true"><div class="coin-face coin-front">앞면</div><div class="coin-face coin-back">뒷면</div></div></div></div><div class="controls"><button id="startBtn" class="btn wide">게임 시작</button><button id="goBtn" class="btn wide" disabled>GO</button><button id="stopBtn" class="btn wide" disabled>STOP</button></div><div id="log"></div><div style="margin-top:12px;color:var(--muted);font-size:13px">단계: 1)80% x1.1 · 2)70% x1.3 · 3)60% x1.5 · 4)50% x1.8 · 5)30% x2.5 · 6)20% x4 · 7)10% x8</div></div></div><div id="modal" class="modal-back"><div class="modal"><div id="modalContent"></div></div></div><script type="module">import{initializeApp}from"https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";import{getFirestore,doc,setDoc,getDoc,updateDoc,collection,query,orderBy,getDocs,limit}from"https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";const firebaseConfig={apiKey:"AIzaSyDfTOFchRqnH1ifrwgJ-F--qdzRGecs0Q8",authDomain:"bacarat-5e575.firebaseapp.com",databaseURL:"https://bacarat-5e575-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"bacarat-5e575",storageBucket:"bacarat-5e575.firebasestorage.app",messagingSenderId:"805374159280",appId:"1:805374159280:web:7b4d1bd628b29341ee4e75",measurementId:"G-9HK381F3LF"};const app=initializeApp(firebaseConfig);const db=getFirestore(app);const stages=[{name:'1단계',prob:0.8,mult:1.1},{name:'2단계',prob:0.7,mult:1.3},{name:'3단계',prob:0.6,mult:1.5},{name:'4단계',prob:0.5,mult:1.8},{name:'5단계',prob:0.3,mult:2.5},{name:'6단계',prob:0.2,mult:4.0},{name:'7단계',prob:0.1,mult:8.0}];const inId=document.getElementById('inId');const inPwd=document.getElementById('inPwd');const btnLogin=document.getElementById('btnLogin');const btnSignup=document.getElementById('btnSignup');const rankPreviewTbody=document.querySelector('#rankPreview tbody');const creditsEl=document.getElementById('credits');const stageLabel=document.getElementById('stageLabel');const betEl=document.getElementById('bet');const startBtn=document.getElementById('startBtn');const goBtn=document.getElementById('goBtn');const stopBtn=document.getElementById('stopBtn');const coinEl=document.getElementById('coin');const glowEl=document.getElementById('glow');const logEl=document.getElementById('log');let currentUser=null,userCredits=0,currentStageIndex=-1,currentBet=0,started=false;function appendLog(t){const d=document.createElement('div');d.className='log-item';d.textContent=`${new Date().toLocaleTimeString()} — ${t}`;logEl.prepend(d)}btnSignup.addEventListener('click',async()=>{const id=inId.value.trim(),pwd=inPwd.value;if(!/^[0-9]+$/.test(id))return alert('학번은 숫자만 입력하세요.');if(!pwd||pwd.length<2)return alert('비밀번호를 입력하세요.');const ref=doc(db,'users',id);const snap=await getDoc(ref);if(snap.exists())return alert('이미 존재하는 학번입니다. 가입 불가.');await setDoc(ref,{id:id,password:pwd,credits:100,createdAt:new Date().toISOString()});appendLog(`회원가입 완료: ${id} (크레딧 100)`);alert('가입완료! 로그인하세요.');loadRankPreview()});btnLogin.addEventListener('click',async()=>{const id=inId.value.trim(),pwd=inPwd.value;if(!id)return alert('학번 입력');const ref=doc(db,'users',id);const snap=await getDoc(ref);if(!snap.exists())return alert('해당 학번 없음. 가입하세요.');const data=snap.data();if(data.password!==pwd)return alert('비밀번호 불일치');currentUser=id;userCredits=data.credits||0;creditsEl.textContent=userCredits;appendLog(`로그인: ${id}`);document.querySelector('.game').scrollIntoView({behavior:'smooth'})});startBtn.addEventListener('click',()=>{if(!currentUser)return alert('먼저 로그인하세요.');const bet=Number(betEl.value)||0;if(bet<=0)return alert('배팅액 입력');if(bet>userCredits)return alert('크레딧 부족');currentBet=bet;currentStageIndex=0;started=true;startBtn.disabled=true;goBtn.disabled=true;stopBtn.disabled=true;stageLabel.textContent=stages[currentStageIndex].name;appendLog(`배팅 ${bet} 시작 — ${stages[currentStageIndex].name}`);attemptStage()});async function attemptStage(){const prob=stages[currentStageIndex].prob;appendLog(`${stages[currentStageIndex].name} 시도 (성공확률 ${Math.round(prob*100)}%)`);const ok=Math.random()<prob;coinEl.classList.remove('heads','tails');coinEl.classList.add('spin');glowEl.style.display='block';glowEl.className='glow';setTimeout(async()=>{coinEl.classList.remove('spin');coinEl.classList.add(ok?'heads':'tails');glowEl.className=ok?'glow win':'glow lose';if(ok){appendLog('성공! GO 또는 STOP 선택 가능');goBtn.disabled=false;stopBtn.disabled=false}else{appendLog('실패! 배팅액 전액 손실');userCredits-=currentBet;if(userCredits<0)userCredits=0;creditsEl.textContent=userCredits;await updateDoc(doc(db,'users',currentUser),{credits:userCredits});resetRun()}},1200)}goBtn.addEventListener('click',()=>{if(!started)return;if(currentStageIndex>=stages.length-1)return alert('마지막 단계');currentStageIndex++;stageLabel.textContent=stages[currentStageIndex].name;goBtn.disabled=true;stopBtn.disabled=true;appendLog(`다음 단계 도전: ${stages[currentStageIndex].name}`);attemptStage()});stopBtn.addEventListener('click',async()=>{if(!started)return;const payout=Math.floor(currentBet*stages[currentStageIndex].mult);appendLog(`STOP 회수: ${payout}`);userCredits+=payout;creditsEl.textContent=userCredits;await updateDoc(doc(db,'users',currentUser),{credits:userCredits});resetRun()});function resetRun(){currentStageIndex=-1;started=false;currentBet=0;startBtn.disabled=false;goBtn.disabled=true;stopBtn.disabled=true;stageLabel.textContent='-';glowEl.style.display='none'}async function loadRankPreview(){try{const q=query(collection(db,'users'),orderBy('credits','desc'),limit(5));const snap=await getDocs(q);rankPreviewTbody.innerHTML='';let i=1;snap.forEach(d=>{const r=d.data();const tr=document.createElement('tr');tr.innerHTML=`<td>#${i}</td><td>${r.id}</td><td>${r.credits||0}</td>`;rankPreviewTbody.appendChild(tr);i++})}catch(e){console.error(e)}loadRankPreview();</script></body></html>
